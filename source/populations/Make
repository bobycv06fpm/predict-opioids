Import("*")

### InitialOutcomes ###

env.Python("#scratch/populations/InitialOutcomes.csv",
           ["InitialOutcomes.py",
            "#scratch/inputs/medicaid_diag_cde.h5",
            "#scratch/inputs/medicaid_proc_cde.h5",
            constants["INITIAL_OUTCOMES_START"],
            constants["INITIAL_OUTCOMES_END"]])


### InitialRX ###

env.Python([tables["population"],
            "#scratch/populations/InitialRX.csv"],
           ["InitialRX.py",
            "#scratch/inputs/medicaid_pharmacy.h5",
            constants["INITIAL_RX_START"],
            constants["INITIAL_RX_END"],
            "#input/other/ndc-opioids.csv",
            "#scratch/populations/InitialOutcomes.csv",
            constants["RANDOM_SEED"]])

env.Python(tables["lookback"],
           ["lookback.py",
            tables["population"],
            constants["NSTEPS"]])

env.Python(tables["enrolled"],
           ["enrolled.py",
            tables["lookback"],
            tables["medicaid_enrollment_2"]])


### TestCurrentNDC ###

env.Python("#output/populations/TestCurrentNDC.py.log",
           ["TestCurrentNDC.py",
            "#scratch/inputs/medicaid_pharmacy.h5",
            constants["INITIAL_RX_START"],
            constants["INITIAL_RX_END"],
            "#input/public/ndc-20180523-product.txt"])

### Compare ASHP and NDC Directory opioid classifications ###

env.Python("#output/populations/CompareOpioids.csv",
           ["CompareOpioids.py",
            "#input/other/ashp.csv",
            "#input/other/ndc-opioids.csv"])

### Household ###

env.Python(tables["household"],
           ["household.py",
            tables["population"],
            tables["lookback"],
            tables["dhs_relations"]])

# vim: syntax=python expandtab sw=4 ts=4
